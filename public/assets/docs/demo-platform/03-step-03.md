Now it’s time to wire up authentication so your app can actually log people in. Until this step is complete, AIya is running in “training wheels” mode. Once you’re logged in, the fun (RAG + FGA) really begins. 🚀

## ✅ Expected Outcome

By the end of this step you should:

- Be able to sign up / log in via Auth0.
- Have a working session in your app.
- Trigger AIya’s “you’re authenticated!” message.
- Unlock the rest of the lab steps.
---

## Update `.env` (server-side variables)

Open the **root** of your project and locate the `.env` file. Add the following keys:

```bash
# Auth0 tenant domain (without https://)
AUTH0_DOMAIN=xxxxx.cic-demo-platform.auth0.com

# Client ID for your lab app
AUTH0_CLIENT_ID=abc123XYZdemo
```

> [!IMPORTANT]
> **Where do I find these values?**
>
> If the values are not auto-populated above, following the following steps:
> 1. Navigate to the [Auth0 Demo Platform Dashboard](https://manage.cic-demo-platform.auth0app.com/dashboard).
> 2. Select your tenant (the one created for this lab -- you probably already have it open!).
> 3. Go to **Applications → Applications → \[the bAInk]**.
> 4. Copy the **Domain** and **Client ID**.

---

## Update `.env.local` (server-side + secrets)

Next, open `.env.local` (create it if missing). Add:

```bash
# The application’s client secret (from Auth0 app settings)
AUTH0_CLIENT_SECRET=abc123SuperSecretKey

# A session secret (generate one yourself!)
# openssl rand -base64 32
AUTH0_SECRET=<randomly-generated-value>
```

> [!IMPORTANT]
> 👉 **Where do I find these values?**
>
> * `AUTH0_CLIENT_SECRET`: From the same **Applications → \[Lab App]** screen
> * `AUTH0_SECRET`: Generate using OpenSSL (or your favorite random generator):
>
> ```bash
>  openssl rand -base64 32
>  ```

> [!WARNING]
> Never commit `.env.local` to git. It belongs _on your machine only_.

---

## Save & Restart

Just to be safe, restart your dev server so it picks up the new environment variables:

1. Terminate the app:
<br>`^` + `C` (Mac)
<br> *or*
<br>`Ctrl` + `C` (PC)

2. Start it again:
```bash
pnpm dev
```

## Test authentication

1. Open the app at [`http://localhost:3000`](http://localhost:3000).
2. Click **Sign up**.
3. Create a user (use an email you can access).
4. Pick a password. I know... passwords are so last year. _That's another lab for another day_.

If everything is working:

* You’ll be redirected back to the app as an authenticated user.
* A message will be sent (automatically) to AIya that you have _successfully authenticated_.
* From here, accounts + transactions are automatically created for you behind the scenes. 🎉
  * Feel free to click on **Accounts** if you don't believe me!

![First Auth message](http://localhost:3000/assets/images/the-bAInk-post-auth.gif)

If it doesn’t work:

* Check your `.env` and `.env.local` for typos.
* Open the browser console and/or server logs for error details.
* Ask AIya -- e.g. `I’m failing auth with error XYZ` (_and paste the error message_).